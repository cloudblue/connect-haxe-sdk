<!DOCTYPE html>
<html lang="en"><!-- use theme color or fallback -->
<!--use textcolor from settings, otherwise create a contrasting color to theme color-->
<head><meta charset="utf-8"/><link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet"/><link href="../bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet"/><link href="../bootstrap/css/bootstrap-select.min.css" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,700italic,400italic" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600,600italic,400" rel="stylesheet" type="text/css"/><link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" rel="stylesheet" type="text/css"/><script src="../jquery-1.9.1.min.js"></script><script src="../bootstrap/js/bootstrap.min.js"></script><script src="../bootstrap/js/bootstrap-select.min.js"></script><link href="../styles.css" rel="stylesheet"/><link href="../extra-styles.css" rel="stylesheet"/><link href="../haxe-nav.css" rel="stylesheet"/><script>var dox = {rootPath: "../",platforms: ["doc"]};</script><script src="../nav.js"></script><script src="../index.js"></script><link rel="icon" href="../favicon.ico" type="image/x-icon"/><title>connect.Flow - Haxe SDK Documentation</title><meta name="description" content="A Flow represents a set of steps within a &lt;code&gt;&lt;a href=&quot;../connect/Processor.html#Processor&quot;&gt;Processor&lt;/a&gt;&lt;/code&gt; which are executed for all requests
that return &lt;code&gt;true&lt;/code&gt; for a given function. If &lt;code&gt;null&lt;/code&gt; is passed, all requests will be processed."/></head><body><style>
.navbar .brand {
	display: inline-block;
	float: none;
	text-shadow: 0 0 0 transparent;
</style><nav class="nav"><div class="navbar"><div class="navbar-inner" style="background:#4275B3; border-bottom:1px solid rgba(0,0,0,.09)"><div class="container"><a class="brand"><img alt="" src="https://cloudblue.github.io/connect-haxe-sdk/connect.png"/></a><a class="brand" style="color:#FFFFFF" href="../">Haxe SDK Documentation</a></div></div></div></nav><div class="container main-content"><div class="row-fluid"><div class="span3"><div class="well sidebar-nav"><form class="form-search" id="searchForm"><div class="input-prepend input-block-level"><span class="add-on"><i class="icon-search"></i></span><input id="search" type="text" placeholder="Filter (Ctrl+P)" autocomplete="off"/></div></form></div><div class="well sidebar-nav" id="explorer"><div id="nav"></div></div></div><div class="span9"><div class="page-header"><span class="viewsource"><a href="https://github.com/cloudblue/connect-haxe-sdk/tree/master/connect/Flow.hx" class="btn btn-medium"><i class="fa fa-eye"></i> View source</a></span><h1><small>class</small> Flow</h1><h4><small>package <a href="../index.html">connect</a></small></h4><h4><small>extends <span class="type">Base</span></small></h4>    <h4><small>implements <span class="type">FlowStoreDelegate</span>, <span class="type">FlowExecutorDelegate</span></small></h4></div><div class="body"><div class="doc doc-main"><p>A Flow represents a set of steps within a <code><a href="../connect/Processor.html#Processor">Processor</a></code> which are executed for all requests
that return <code>true</code> for a given function. If <code>null</code> is passed, all requests will be processed.</p></div><h3 class="section">Constructor</h3><div class="fields"><div class="field "><a name="new"></a><h3 class="anchor"><code><a href="#new"><span class="identifier">new</span></a>(<span style="white-space:nowrap">filterFunc:<span class="type">FilterFunc</span></span>)</code></h3><div class="doc"><p>Creates a new Flow.</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th style="width:25%;"><code>filterFunc</code></th><td><p>A function which is executed for every request listed by the <code><a href="../connect/Processor.html#Processor">Processor</a></code>
to which <code>this</code> Flow is attached. All requests for which the function returns <code>true</code> will
be processed by <code>this</code> Flow when the Processor runs.</p></td></tr></table></div></div></div><h3 class="section">Methods</h3><div class="fields"><div class="field "><a name="approveByTemplate"></a><h3 class="anchor"><code><a href="#approveByTemplate"><span class="identifier">approveByTemplate</span></a>(<span style="white-space:nowrap">id:<span class="type">String</span></span>):<span class="type">Void</span></code></h3><div class="doc"><p>Changes the status of the request being processed to "approved", sending the id
of a Template to render on the portal.</p>
<p>When using the Flow, this method should be used instead of <code><a href="../connect/models/AssetRequest.html#approveByTemplate">AssetRequest.approveByTemplate</a>()</code> or
<code><a href="../connect/models/TierConfigRequest.html#approveByTemplate">TierConfigRequest.approveByTemplate</a>()</code>, since this take care of cleaning the stored step
information, and automatically skips any further steps.</p></div></div><div class="field "><a name="approveByTile"></a><h3 class="anchor"><code><a href="#approveByTile"><span class="identifier">approveByTile</span></a>(<span style="white-space:nowrap">text:<span class="type">String</span></span>):<span class="type">Void</span></code></h3><div class="doc"><p>Changes the status of the request being processed to "approved", rendering a tile on
the portal with the given Markdown <code>text</code>.</p>
<p>When using the Flow, this method should be used instead of <code><a href="../connect/models/AssetRequest.html#approveByTile">AssetRequest.approveByTile</a>()</code> or
<code><a href="../connect/models/TierConfigRequest.html#approveByTile">TierConfigRequest.approveByTile</a>()</code>, since this take care of cleaning the stored step
information, and automatically skips any further steps.</p></div></div><div class="field "><a name="fail"></a><h3 class="anchor"><code><a href="#fail"><span class="identifier">fail</span></a>(<span style="white-space:nowrap">reason:<span class="type">String</span></span>):<span class="type">Void</span></code></h3><div class="doc"><p>Changes the status of the request being processed to "failed".</p>
<p>When using the Flow, this method should be used instead of <code><a href="../connect/models/AssetRequest.html#fail">AssetRequest.fail</a>()</code> or
<code><a href="../connect/models/TierConfigRequest.html#fail">TierConfigRequest.fail</a>()</code>, since this takes care of cleaning the stored step
information, and automatically skips any further steps.</p></div></div><div class="field "><a name="getAssetRequest"></a><h3 class="anchor"><code><a href="#getAssetRequest"><span class="identifier">getAssetRequest</span></a>():<a class="type" title="connect.models.AssetRequest - Represents a request of the Fulfillment Api." href="../connect/models/AssetRequest.html">AssetRequest</a></code></h3><div class="doc"><p>This can be called within your steps to get the request being processed, as long as it
is of the <code><a href="../connect/models/AssetRequest.html#AssetRequest">AssetRequest</a></code> type.</p><p class="javadoc">Returns:</p><div class="indent inline-content"><p>The <code><a href="../connect/models/AssetRequest.html#AssetRequest">AssetRequest</a></code> being processed, or <code>null</code> if current request is not of
Fulfillment api.</p></div></div></div><div class="field "><a name="getCurrentAttempt"></a><h3 class="anchor"><code><a href="#getCurrentAttempt"><span class="identifier">getCurrentAttempt</span></a>():<span class="type">Int</span></code></h3><div class="doc"><p>Provide current step attempt.</p><p class="javadoc">Returns:</p><div class="indent inline-content"><p>Int Number of times that this step has been executed</p></div></div></div><div class="field "><a name="getData"></a><h3 class="anchor"><code><a href="#getData"><span class="identifier">getData</span></a>(<span style="white-space:nowrap">key:<span class="type">String</span></span>):<span class="type">Dynamic</span></code></h3><div class="doc"><p>Retrieves Flow data previously set with <code>setData</code> or <code>setVolatileData</code>.
If the data has been set both as persistent as volatile, the persistent
version is obtained.</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th style="width:25%;"><code>key</code></th><td><p>The name of the key that identifies the data to be obtained.</p></td></tr></table><p class="javadoc">Returns:</p><div class="indent inline-content"><p>The value of the data, or <code>null</code> if the key does not exist.</p></div></div></div><div class="field "><a name="getDataKeys"></a><h3 class="anchor"><code><a href="#getDataKeys"><span class="identifier">getDataKeys</span></a>():<a class="type" title="connect.util.Collection - A Collection is a way to have a standard collection type across all languages supported by the SDK." href="../connect/util/Collection.html">Collection</a>&lt;<span class="type">String</span>&gt;</code></h3><div class="doc"><p class="javadoc">Returns:</p><div class="indent inline-content"><p>Collection<String> The keys of all the data stored in the Flow.</p></div></div></div><div class="field "><a name="getListing"></a><h3 class="anchor"><code><a href="#getListing"><span class="identifier">getListing</span></a>():<a class="type" title="connect.models.Listing - A Listing represents the the actual publishing procedure in the Connect platform." href="../connect/models/Listing.html">Listing</a></code></h3><div class="doc"><p>This can be called within your steps to get the element being processed, as long as it
is of the <code><a href="../connect/models/Listing.html#Listing">Listing</a></code> type.</p><p class="javadoc">Returns:</p><div class="indent inline-content"><p>The <code><a href="../connect/models/Listing.html#Listing">Listing</a></code> being processed, or <code>null</code> if current element is not of
Listing api.</p></div></div></div><div class="field "><a name="getTierConfigRequest"></a><h3 class="anchor"><code><a href="#getTierConfigRequest"><span class="identifier">getTierConfigRequest</span></a>():<a class="type" title="connect.models.TierConfigRequest" href="../connect/models/TierConfigRequest.html">TierConfigRequest</a></code></h3><div class="doc"><p>This can be called within your steps to get the request being processed, as long as it
is of the <code><a href="../connect/models/TierConfigRequest.html#TierConfigRequest">TierConfigRequest</a></code> type.</p><p class="javadoc">Returns:</p><div class="indent inline-content"><p>The <code><a href="../connect/models/TierConfigRequest.html#TierConfigRequest">TierConfigRequest</a></code> being processed, or <code>null</code> if current request is not of
Tier api.</p></div></div></div><div class="field "><a name="getUsageFile"></a><h3 class="anchor"><code><a href="#getUsageFile"><span class="identifier">getUsageFile</span></a>():<a class="type" title="connect.models.UsageFile - Usage File Object." href="../connect/models/UsageFile.html">UsageFile</a></code></h3><div class="doc"><p>This can be called within your steps to get the request being processed, as long as it
is of the <code><a href="../connect/models/UsageFile.html#UsageFile">UsageFile</a></code> type.</p><p class="javadoc">Returns:</p><div class="indent inline-content"><p>The <code><a href="../connect/models/UsageFile.html#UsageFile">UsageFile</a></code> being processed, or <code>null</code> if current request is not of
Usage api.</p></div></div></div><div class="field "><a name="inquire"></a><h3 class="anchor"><code><a href="#inquire"><span class="identifier">inquire</span></a>(<span style="white-space:nowrap">templateId:<span class="type">String</span>,</span> <span style="white-space:nowrap">params:<a class="type" title="connect.util.Collection - A Collection is a way to have a standard collection type across all languages supported by the SDK." href="../connect/util/Collection.html">Collection</a>&lt;<a class="type" title="connect.models.Param - Parameters are used in product and asset definitions." href="../connect/models/Param.html">Param</a>&gt;</span>):<span class="type">Void</span></code></h3><div class="doc"><p>Changes the status of the request being processed to "inquiring".</p>
<p>When using the Flow, this method should be used instead of <code><a href="../connect/models/AssetRequest.html#inquire">AssetRequest.inquire</a>()</code> or
<code><a href="../connect/models/TierConfigRequest.html#inquire">TierConfigRequest.inquire</a>()</code>, since this take care of cleaning the stored step
information, and automatically skips any further steps. Also, this method calls <code>update</code>
on the request before changing its status.</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th style="width:25%;"><code>templateId</code></th><td><p>Id of the template to use in the portal, or <code>null</code> to not use any. This
is only used for AssetRequests.</p></td></tr><tr><th style="width:25%;"><code>params</code></th><td><p>A collection of parameters to update. If <code>null</code> is passed, then the
parameters that have changed in the request will be updated.</p></td></tr></table></div></div><div class="field "><a name="pend"></a><h3 class="anchor"><code><a href="#pend"><span class="identifier">pend</span></a>():<span class="type">Void</span></code></h3><div class="doc"><p>Changes the status of the request being processed to "pending".</p>
<p>When using the Flow, this method should be used instead of <code><a href="../connect/models/AssetRequest.html#pend">AssetRequest.pend</a>()</code> or
<code><a href="../connect/models/TierConfigRequest.html#pend">TierConfigRequest.pend</a>()</code>, since this take care of cleaning the stored step
information, and automatically skips any further steps.</p></div></div><div class="field "><a name="setData"></a><h3 class="anchor"><code><a href="#setData"><span class="identifier">setData</span></a>(<span style="white-space:nowrap">key:<span class="type">String</span>,</span> <span style="white-space:nowrap">value:<span class="type">Dynamic</span></span>):<a class="type" title="connect.Flow - A Flow represents a set of steps within a Processor which are executed for all requests that return true for a given function." href="../connect/Flow.html">Flow</a></code></h3><div class="doc"><p>Steps can pass data to the next one using the return value, but this data could be lost if
we need to access it several steps later. For this reason, every Flow has a dictionary
of keys and values to store custom data, that can be set with this method and retreived
later on with <code>getData</code>. It is VERY important for the correct function of the Flow
to only rely on the data set using this mechanism, and NEVER add additional properties
when creating a subclass of Flow, since this data would not be automatically saved
to support resuming in case processing fails.</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th style="width:25%;"><code>key</code></th><td><p>The name of the key that will be used to identify this data.</p></td></tr><tr><th style="width:25%;"><code>value</code></th><td><p>The value to store. It is recommended to use primitive types, strings,
instances of <code><a href="../connect/models/Model.html#Model">Model</a></code>, or other classes that implement a <code>toString</code> method so they
can be serialized.</p></td></tr></table><p class="javadoc">Returns:</p><div class="indent inline-content"><p><code>this</code> Flow, so calls to this method can be chained.</p></div></div></div><div class="field "><a name="setSkipRequestOnPendingMigration"></a><h3 class="anchor"><code><a href="#setSkipRequestOnPendingMigration"><span class="identifier">setSkipRequestOnPendingMigration</span></a>(<span style="white-space:nowrap">enable:<span class="type">Bool</span></span>):<span class="type">Void</span></code></h3><div class="doc"><p>Enables or disables skipping the request when it is pending migration. Defaults to true.</p></div></div><div class="field "><a name="setStoreNumAttempts"></a><h3 class="anchor"><code><a href="#setStoreNumAttempts"><span class="identifier">setStoreNumAttempts</span></a>(<span style="white-space:nowrap">enable:<span class="type">Bool</span></span>):<span class="type">Void</span></code></h3><div class="doc"><p>Enables or disables storing the number of execution attempts when storing request data. If
<code>setStoreRequestOnFailure</code> is set to <code>false</code>, this is ignored.</p></div></div><div class="field "><a name="setStoreRequestOnFailure"></a><h3 class="anchor"><code><a href="#setStoreRequestOnFailure"><span class="identifier">setStoreRequestOnFailure</span></a>(<span style="white-space:nowrap">enable:<span class="type">Bool</span></span>):<span class="type">Void</span></code></h3><div class="doc"><p>Enables or disables storing of request data when the Flow fails execution. Defaults to true.</p></div></div><div class="field "><a name="setVolatileData"></a><h3 class="anchor"><code><a href="#setVolatileData"><span class="identifier">setVolatileData</span></a>(<span style="white-space:nowrap">key:<span class="type">String</span>,</span> <span style="white-space:nowrap">value:<span class="type">Dynamic</span></span>):<a class="type" title="connect.Flow - A Flow represents a set of steps within a Processor which are executed for all requests that return true for a given function." href="../connect/Flow.html">Flow</a></code></h3><div class="doc"><p>This method follows the same goal as <code>setData</code>, but the data established with
this method never gets saved in case processing fails. So this is ideal
for storing data that can be safely recomputed on next execution, and we do
not need to retrieve from saved data. If we store a value with both <code>setVolatileData</code>
and <code>setData</code>, then <code>getData</code> will retrieve the persistent version set with <code>setData</code>,
so be careful about that behaviour.</p></div></div><div class="field "><a name="setup"></a><h3 class="anchor"><code><a href="#setup"><span class="identifier">setup</span></a>():<span class="type">Void</span></code></h3><div class="doc"><p>The setup function is always called before executing the steps, independently of what is
the first step that will be run. If you need some initialization tasks that you always
need to perform independently of whether you are resuming from a previous execution
or not, you can override this method and write your initialization tasks.</p>
<p>If you are resuming from a previous execution and this method writes information with
<code><a href="../connect/Flow.html#setData">Flow.setData</a></code>, that information will be overridden with the one restored from the
previous execution.</p></div></div><div class="field "><a name="skipsRequestOnPendingMigration"></a><h3 class="anchor"><code><a href="#skipsRequestOnPendingMigration"><span class="identifier">skipsRequestOnPendingMigration</span></a>():<span class="type">Bool</span></code></h3><div class="doc"><p>Tells if requests are automatically skipped when they are pending migration.</p></div></div><div class="field "><a name="step"></a><h3 class="anchor"><code><a href="#step"><span class="identifier">step</span></a>(<span style="white-space:nowrap">description:<span class="type">String</span>,</span> <span style="white-space:nowrap">func:<span class="type">StepFunc</span></span>):<a class="type" title="connect.Flow - A Flow represents a set of steps within a Processor which are executed for all requests that return true for a given function." href="../connect/Flow.html">Flow</a></code></h3><div class="doc"><p>Defines a step of <code>this</code> Flow. Steps are executed sequentially by the Flow
when its <code>run</code> method is invoked.</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th style="width:25%;"><code>description</code></th><td><p>Description of what the step does, so the Flow can indicate it in the log.</p></td></tr><tr><th style="width:25%;"><code>func</code></th><td><p>The function to execute for this step. It receives <code>this</code> Flow as argument, and it cannot return a value.</p></td></tr></table><p class="javadoc">Returns:</p><div class="indent inline-content"><p><code>this</code> Flow, so calls to this method can be chained.</p></div></div></div><div class="field "><a name="storesNumAttempts"></a><h3 class="anchor"><code><a href="#storesNumAttempts"><span class="identifier">storesNumAttempts</span></a>():<span class="type">Bool</span></code></h3><div class="doc"><p>Tells if the number of execution attempts is stored with the rest of request data. If
<code>storesRequestOnFailure</code> is set to <code>false</code>, this is ignored.</p></div></div><div class="field "><a name="storesRequestOnFailure"></a><h3 class="anchor"><code><a href="#storesRequestOnFailure"><span class="identifier">storesRequestOnFailure</span></a>():<span class="type">Bool</span></code></h3><div class="doc"><p>Tells if the flow stores request data when Flow execution fails.</p></div></div></div>  </div></div></div></div><footer class="section site-footer" style="background:#4275B3"><div class="container"><div class="copyright"><p style="color:#FFFFFF">This documentation is generated for version 22.1.0</p><p style="color:#FFFFFF">&copy; 2021 &nbsp;Ingram Micro Inc.</p></div></div></footer><script src="..//highlighter.js"></script><link href="../highlighter.css" rel="stylesheet"/></body></html>